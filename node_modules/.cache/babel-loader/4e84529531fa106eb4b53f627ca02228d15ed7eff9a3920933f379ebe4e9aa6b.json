{"ast":null,"code":"import _regeneratorRuntime from\"D:/React_projects/Notemaker_deployment/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/React_projects/Notemaker_deployment/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/React_projects/Notemaker_deployment/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import MainScreen from\"../components/MainScreen\";import{Button,Card,Form}from\"react-bootstrap\";import Loading from\"../components/Loading\";import ReactMarkdown from\"react-markdown\";import{useDispatch}from\"react-redux\";import{useSelector}from\"react-redux\";import ErrorMessage from\"../components/Errormessage\";import axios from\"axios\";import{deleteNoteAction,updateNoteAction}from\"../actions/notesActions\";import{Navigate}from\"react-router-dom\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SingleNote(_ref){var match=_ref.match,history=_ref.history;var _useParams=useParams(),id=_useParams.id;var _useState=useState(),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setCategory=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),date=_useState8[0],setDate=_useState8[1];var dispatch=useDispatch();var noteUpdate=useSelector(function(state){return state.noteUpdate;});var loading=noteUpdate.loading,error=noteUpdate.error;var noteDelete=useSelector(function(state){return state.noteDelete;});var loadingDelete=noteDelete.loading,errorDelete=noteDelete.error;var deleteHandler=function deleteHandler(id){if(window.confirm(\"Are you sure?\")){dispatch(deleteNoteAction(id));}Navigate(\"/mynotes\");};useEffect(function(){var fetching=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/notes/\".concat(id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(\"sonnaaaaa\",data);setTitle(data.title);setContent(data.content);setCategory(data.category);setDate(data.updatedAt);case 9:case\"end\":return _context.stop();}},_callee);}));return function fetching(){return _ref2.apply(this,arguments);};}();fetching();},[date]);var resetHandler=function resetHandler(){setTitle(\"\");setCategory(\"\");setContent(\"\");};var updateHandler=function updateHandler(e){e.preventDefault();console.log(\"match\");dispatch(updateNoteAction(id,title,content,category));if(!title||!content||!category)return;resetHandler();Navigate(\"/mynotes\");};return/*#__PURE__*/_jsx(MainScreen,{title:\"Edit Note\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Edit your Note\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:updateHandler,children:[loadingDelete&&/*#__PURE__*/_jsx(Loading,{}),error&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:error}),errorDelete&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:errorDelete}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"title\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Title\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"title\",placeholder:\"Enter the title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"content\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Content\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",placeholder:\"Enter the content\",rows:4,value:content,onChange:function onChange(e){return setContent(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),content&&/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Note Preview\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(ReactMarkdown,{children:content})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"content\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"content\",placeholder:\"Enter the Category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]}),loading&&/*#__PURE__*/_jsx(Loading,{size:50}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Update Note\"})]})}),/*#__PURE__*/_jsxs(Card.Footer,{className:\"text-muted\",children:[\"Updated on - \",date.substring(0,10)]})]})});}export default SingleNote;","map":{"version":3,"names":["React","useEffect","useState","MainScreen","Button","Card","Form","Loading","ReactMarkdown","useDispatch","useSelector","ErrorMessage","axios","deleteNoteAction","updateNoteAction","Navigate","useParams","jsx","_jsx","jsxs","_jsxs","SingleNote","_ref","match","history","_useParams","id","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","content","setContent","_useState5","_useState6","category","setCategory","_useState7","_useState8","date","setDate","dispatch","noteUpdate","state","loading","error","noteDelete","loadingDelete","errorDelete","deleteHandler","window","confirm","fetching","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","concat","sent","console","log","updatedAt","stop","apply","arguments","resetHandler","updateHandler","e","preventDefault","children","Header","Body","onSubmit","variant","Group","controlId","Label","Control","type","placeholder","value","onChange","target","as","rows","size","Footer","className","substring"],"sources":["D:/React_projects/Notemaker_deployment/frontend/src/Singlenote/SingleNote.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport MainScreen from \"../components/MainScreen\";\r\nimport { Button, Card, Form } from \"react-bootstrap\";\r\nimport Loading from \"../components/Loading\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useSelector } from \"react-redux\";\r\nimport ErrorMessage from \"../components/Errormessage\";\r\nimport axios from \"axios\";\r\nimport { deleteNoteAction, updateNoteAction } from \"../actions/notesActions\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nfunction SingleNote({ match, history }) {\r\n  const { id } = useParams();\r\n  const [title, setTitle] = useState();\r\n  const [content, setContent] = useState();\r\n  const [category, setCategory] = useState();\r\n  const [date, setDate] = useState(\"\");\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const noteUpdate = useSelector((state) => state.noteUpdate);\r\n  const { loading, error } = noteUpdate;\r\n\r\n  const noteDelete = useSelector((state) => state.noteDelete);\r\n  const { loading: loadingDelete, error: errorDelete } = noteDelete;\r\n\r\n  const deleteHandler = (id) => {\r\n    if (window.confirm(\"Are you sure?\")) {\r\n      dispatch(deleteNoteAction(id));\r\n    }\r\n    Navigate(\"/mynotes\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetching = async () => {\r\n      const { data } = await axios.get(`/api/notes/${id}`);\r\n      console.log(\"sonnaaaaa\", data);\r\n      setTitle(data.title);\r\n      setContent(data.content);\r\n      setCategory(data.category);\r\n      setDate(data.updatedAt);\r\n    };\r\n\r\n    fetching();\r\n  }, [date]);\r\n\r\n  const resetHandler = () => {\r\n    setTitle(\"\");\r\n    setCategory(\"\");\r\n    setContent(\"\");\r\n  };\r\n\r\n  const updateHandler = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"match\");\r\n    dispatch(updateNoteAction(id, title, content, category));\r\n    if (!title || !content || !category) return;\r\n\r\n    resetHandler();\r\n    Navigate(\"/mynotes\");\r\n  };\r\n\r\n  return (\r\n    <MainScreen title=\"Edit Note\">\r\n      <Card>\r\n        <Card.Header>Edit your Note</Card.Header>\r\n        <Card.Body>\r\n          <Form onSubmit={updateHandler}>\r\n            {loadingDelete && <Loading />}\r\n            {error && <ErrorMessage variant=\"danger\">{error}</ErrorMessage>}\r\n            {errorDelete && (\r\n              <ErrorMessage variant=\"danger\">{errorDelete}</ErrorMessage>\r\n            )}\r\n            <Form.Group controlId=\"title\">\r\n              <Form.Label>Title</Form.Label>\r\n              <Form.Control\r\n                type=\"title\"\r\n                placeholder=\"Enter the title\"\r\n                value={title}\r\n                onChange={(e) => setTitle(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n            <br />\r\n            <Form.Group controlId=\"content\">\r\n              <Form.Label>Content</Form.Label>\r\n              <Form.Control\r\n                as=\"textarea\"\r\n                placeholder=\"Enter the content\"\r\n                rows={4}\r\n                value={content}\r\n                onChange={(e) => setContent(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n            <br />\r\n            {content && (\r\n              <Card>\r\n                <Card.Header>Note Preview</Card.Header>\r\n                <Card.Body>\r\n                  <ReactMarkdown>{content}</ReactMarkdown>\r\n                </Card.Body>\r\n              </Card>\r\n            )}\r\n            <br />\r\n            <Form.Group controlId=\"content\">\r\n              <Form.Label>Category</Form.Label>\r\n              <Form.Control\r\n                type=\"content\"\r\n                placeholder=\"Enter the Category\"\r\n                value={category}\r\n                onChange={(e) => setCategory(e.target.value)}\r\n              />\r\n            </Form.Group>\r\n            {loading && <Loading size={50} />}\r\n            <br />\r\n            <Button variant=\"primary\" type=\"submit\">\r\n              Update Note\r\n            </Button>\r\n            {/* <Button\r\n              className=\"mx-2\"\r\n              variant=\"danger\"\r\n              onClick={() => deleteHandler(match.params.id)}\r\n            >\r\n              Delete Note\r\n            </Button> */}\r\n          </Form>\r\n        </Card.Body>\r\n\r\n        <Card.Footer className=\"text-muted\">\r\n          Updated on - {date.substring(0, 10)}\r\n        </Card.Footer>\r\n      </Card>\r\n    </MainScreen>\r\n  );\r\n}\r\n\r\nexport default SingleNote;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}